## Проект по работе со счетами клиента.

Проект собирается через Maven. Что бы запустить Docker с базой данных Postgres нужно в корне проекта выполнить:

`docker-compose -f .\local_environment\docker-compose.yml up -d`

`java -jar .\target\app.jar`

Доступный функционал:

1. Создание клиента.
2. Создание счета.
3. Авторизация пользователя.
4. Перевод средств между счетами.

Решенные проблемы:

1. При переводе денежных средств со счета на счет, между выполнением запроса на получение текущего баланса счета
   пользователя и последующим выполнем запроса на обновление баланса счета пользователя, может произойти параллельное
   обновление баланса счета пользователя, что приведет к неконсистенстности данных. Что бы решить эту проблему, был
   использован запрос :
   `'SELECT FOR UPDATE'` при помощи аннотации `Spring-Data - @Lock`.
2. Из первой проблемы следует : Возможность возникновения взаимоблокировки, когда со счета 1 происходит перевод средств
   на счет 2 и одновременно происходит перевод средств со счета 2 на счет 1. Данная проблема решена сортировкой очереди
   блокирования счета по его номеру.
3. Была решена проблема доступа пользователя к счету, который ему не пренадлежит, через авторизацию пользователя.

Ссылка на коллекцию тестов в Postman:

[![Run in Postman](https://run.pstmn.io/button.svg)](https://app.getpostman.com/run-collection/42d458dd0cd77ac90716)
